(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0251a1ba","chunk-2d21d4dd"],{"9ad2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SettingTitle",[t._v(t._s(t.$t("navigation")))]),n("dialog-form",{ref:"navAddDialog",attrs:{"form-schema":t.navlinkAddSchema,title:t.$t("settings.addNavlink")},on:{submit:t.addLink}}),n("delete-confirmation-dialog",{ref:"deleteConfirmationDialog",on:{submit:t.deleteNav}}),n("dialog-form",{ref:"navEditDialog",attrs:{"form-schema":t.navlinkAddSchema,title:t.$t("settings.editNavLink"),"max-width":1e3},on:{updated:t.isExternalLink,submit:t.editNavItem}},[n("template",{slot:"linkType-after"},[t.defaultLink?t._e():n("v-carousel-transition",[t.externalLink?n("v-text-field",{attrs:{"hide-details":"auto",label:t.$t("url"),rules:[t.rules.http],placeholder:t.$i18n.t("settings.httpPlaceholder")},model:{value:t.linkInput,callback:function(e){t.linkInput=e},expression:"linkInput"}}):n("div",[n("v-divider"),n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-row",[n("v-badge",{staticClass:"float-left",attrs:{value:t.htmlInput,inline:"",dot:""}},[t._v(" "+t._s(t.$t("settings.editor"))+" ")])],1)],1),n("v-expansion-panel-content",[n("vue-editor",{model:{value:t.htmlInput,callback:function(e){t.htmlInput=e},expression:"htmlInput"}})],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-row",[n("v-badge",{staticClass:"float-left",attrs:{value:t.rawHtmlInput,inline:"",dot:""}},[t._v(" "+t._s(t.$t("settings.rawHtml"))+" ")])],1)],1),n("v-expansion-panel-content",[n("v-textarea",{attrs:{placeholder:t.$t("settings.rawHtml")},model:{value:t.rawHtmlInput,callback:function(e){t.rawHtmlInput=e},expression:"rawHtmlInput"}})],1)],1)],1)],1)],1)],1)],2),n("v-list",[n("draggable",{attrs:{list:t.links},on:{change:function(e){t.updateLinkEnabled=!0}}},t._l(t.links,(function(e){return n("div",{key:e.title},[n("v-list-item",[n("v-row",{class:e.enabled?"":"text--disabled"},[n("v-col",{attrs:{cols:"1"}},[n("v-icon",[t._v(" "+t._s(e.icon)+" ")])],1),n("v-col",{attrs:{cols:"3"}},[t._v(" "+t._s(e.title)+" ")]),n("v-col",{attrs:{cols:"3"}},[t._v(" "+t._s(e.link)+" ")]),n("v-col",{staticClass:"text-right"},["html"===e.linkType?n("v-icon",{staticClass:"mr-1"},[t._v(" mdi-web ")]):t._e(),"link"===e.linkType?n("v-icon",{staticClass:"mr-1"},[t._v(" mdi-link ")]):t._e(),n("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"primary",small:""},on:{click:function(n){return t.openNavEditDialog(e)}}},[n("v-icon",[t._v(" mdi-pencil ")])],1),n("v-btn",{attrs:{disabled:"default"===e.linkType,outlined:"",color:"error",small:""},on:{click:function(n){return t.openDeleteConfirmationDialog(e)}}},[n("v-icon",[t._v(" mdi-delete ")])],1)],1)],1)],1)],1)})),0)],1),n("v-divider",{staticClass:"mb-3"}),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-btn",{attrs:{outlined:"",color:"success"},on:{click:t.openNavAddDialog}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),n("span",[t._v(t._s(t.$t("settings.addLink")))])],1),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"ml-5",staticStyle:{"border-top-right-radius":"0","border-bottom-right-radius":"0"},attrs:{outlined:"",color:"primary",disabled:!t.updateLinkEnabled},on:{click:t.updateLinkOrder}},"v-btn",i,!1),a),[n("v-icon",[t._v("mdi-check")])],1)]}}])},[n("span",[t._v(" "+t._s(t.$t("settings.navUpdate"))+" ")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({staticStyle:{"border-bottom-left-radius":"0","border-top-left-radius":"0"},attrs:{outlined:"",color:"primary",disabled:!t.updateLinkEnabled},on:{click:t.getNavItems}},"v-btn",i,!1),a),[n("v-icon",[t._v("mdi-backspace-outline")])],1)]}}])},[n("span",[t._v(" "+t._s(t.$t("settings.navReset"))+" ")])])],1),n("v-col",{staticClass:"text--disabled",class:t.$vuetify.breakpoint.mdAndDown?"":"text-right"},[n("span",{staticClass:"mr-3"},[n("v-icon",{attrs:{disabled:""}},[t._v(" mdi-web ")]),t._v(" "+t._s(t.$t("settings.htmlContent"))+" ")],1),n("span",[n("v-icon",{attrs:{disabled:""}},[t._v(" mdi-link ")]),t._v(" "+t._s(t.$t("settings.externalLink"))+" ")],1)])],1)],1)},i=[],r=n("1da1"),l=(n("9911"),n("7db0"),n("c740"),n("a434"),n("96cf"),n("b76a")),s=n.n(l),o=n("861b"),d=n("fe0b"),c=n("8826");function u(t){return{type:"object",required:["title","linkType"],properties:{title:{type:"string",title:d["a"].t("title")},enabled:{type:"boolean",default:!1,title:d["a"].t("enabled")},icon:c["a"].iconPicker,linkType:{type:"string",title:d["a"].t("type"),readOnly:t,oneOf:[{const:"link",title:d["a"].t("settings.externalLink")},{const:"html",title:d["a"].t("settings.htmlContent")}]}}}}var p={returnForm:u},v=n("5873"),m=n("cc3b"),f=n("c94e"),k=n("3000"),g=n("d171"),h={name:"Navigation",components:{DeleteConfirmationDialog:k["a"],SettingTitle:g["default"],DialogForm:o["a"],draggable:s.a,VueEditor:v["a"]},data:function(){return{navlinkAddSchema:null,externalLink:!1,linkInput:null,htmlInput:null,rawHtmlInput:null,defaultLink:null,updateLinkEnabled:!1,rules:{http:function(t){var e=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;return e.test(t)||d["a"].t("htmlNoMatch")}},links:[{title:"News",icon:"mdi-newspaper",link:"/news",tabs:[],enabled:!1,linkType:"default"},{title:"Dashboard",icon:"mdi-account",link:"/dashboard",enabled:!0,linkType:"default"},{title:"Shop",icon:"mdi-sack",link:"/shop",tabs:[],enabled:!0,linkType:"default"},{title:"Bans",icon:"mdi-account-cancel",link:"/ban",reqProp:"ban_show",enabled:!0,linkType:"default"},{title:"Settings",icon:"mdi-cog-outline",link:"/settings",tabs:[],enabled:!0,linkType:"default"}],linksRight:[{title:"Profil",icon:"mdi-account-circle",link:"/"},{title:"Settings",icon:"mdi-cog",link:"/settings"}]}},beforeMount:function(){this.getNavItems()},methods:{getNavItems:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"];case 2:e.sent.design_getNavItems().then((function(e){t.updateLinkEnabled=!1,t.links=e.data})).catch((function(t){return console.log("Could not query nav ".concat(t))}));case 3:case"end":return e.stop()}}),e)})))()},openDeleteConfirmationDialog:function(t){this.$refs.deleteConfirmationDialog.show(t)},openNavEditDialog:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.rawHtmlInput=null,e.htmlInput=null,e.linkInput=null,"default"===t.linkType?(e.navlinkAddSchema=p.returnForm(!0),e.defaultLink=!0):(e.navlinkAddSchema=p.returnForm(),e.defaultLink=!1),e.linkInput=t.link,"html"!==t.linkType||!t.html){n.next=9;break}return n.next=8,m["a"];case 8:n.sent.design_getCmsHtml(t.html).then((function(t){e.rawHtmlInput=t.data.content}));case 9:e.$refs.navEditDialog.show(t),e.$refs.navEditDialog.setData(t);case 11:case"end":return n.stop()}}),n)})))()},isExternalLink:function(){"link"===this.$refs.navEditDialog.getData().linkType?this.externalLink=!0:this.externalLink=!1},openNavAddDialog:function(){this.navlinkAddSchema=p.returnForm(),this.$refs.navAddDialog.show()},addLink:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.navAddDialog.getData(),!t.links.find((function(t){return t.title===n.title}))){e.next=4;break}return t.$refs.navAddDialog.setErrorMessage("Title already used"),e.abrupt("return");case 4:return"html"===n.linkType&&(n.link="/cms/".concat(n.title.toLowerCase())),t.links.push(n),e.next=8,m["a"];case 8:e.sent.design_updateNavItems(null,t.links).then((function(){t.$refs.navAddDialog.closeAndReset(),t.getNavItems(),f["a"].emit("navUpdated")})).catch((function(e){t.$refs.navAddDialog.setErrorMessage(e.response.data.detail),t.links.pop()}));case 9:case"end":return e.stop()}}),e)})))()},updateLinkOrder:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"];case 2:e.sent.design_updateNavItems(null,t.links).then((function(){t.updateLinkEnabled=!1,t.getNavItems(),f["a"].emit("navUpdated")})).catch((function(t){console.log("Could not query nav ".concat(t))}));case 3:case"end":return e.stop()}}),e)})))()},deleteNav:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("default"!==t.linkType){n.next=3;break}return e.$refs.deleteConfirmationDialog.setErrorMessage("Can not delete default links"),n.abrupt("return");case 3:if(a=e.links.findIndex((function(e){return e.title===t.title})),!(a>-1)){n.next=8;break}e.links.splice(a,1),n.next=10;break;case 8:return e.$refs.deleteConfirmationDialog.setErrorMessage("Couldnt find index of nav object to update"),n.abrupt("return");case 10:return n.next=12,m["a"];case 12:n.sent.design_deleteCmsHtml(t.html),e.updateLinkOrder(),e.$refs.deleteConfirmationDialog.closeAndReset();case 15:case"end":return n.stop()}}),n)})))()},editNavItem:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.htmlInput||!e.rawHtmlInput){n.next=3;break}return e.$refs.navEditDialog.setErrorMessage("Do not use both HTML inputs"),n.abrupt("return");case 3:if(a=e.$refs.navEditDialog.getData(),"default"===a.linkType&&(a.link=t.link),a.tabs=t.tabs,a.html=t.html,"html"!==a.linkType){n.next=23;break}if(a.link="/cms/".concat(a.title.toLowerCase()),i=e.rawHtmlInput,null==e.rawHtmlInput&&(i=e.htmlInput),!t.html){n.next=19;break}return n.next=14,m["a"];case 14:return n.next=16,n.sent.design_updateCmsHtml(t.html,{content:i});case 16:a.html=t.html,n.next=23;break;case 19:return n.next=21,m["a"];case 21:return n.next=23,n.sent.design_createCmsHtml(null,{content:i}).then((function(t){a.html=t.data.id})).catch((function(t){throw e.$refs.navEditDialog.setErrorMessage(t),t}));case 23:if("link"===a.linkType&&(a.link=e.linkInput),r=e.links.findIndex((function(e){return e.title===t.title})),!(r>-1)){n.next=29;break}e.links.splice(r,1,a),n.next=31;break;case 29:return e.$refs.navEditDialog.setErrorMessage("Couldnt find index of nav object to update"),n.abrupt("return");case 31:return n.next=33,e.updateLinkOrder();case 33:e.$refs.navEditDialog.closeAndReset();case 34:case"end":return n.stop()}}),n)})))()}}},b=h,x=n("2877"),w=n("6544"),_=n.n(w),D=n("4ca6"),I=n("8336"),y=n("0789"),C=n("62ad"),E=n("ce7e"),$=n("cd55"),L=n("49e2"),T=n("c865"),A=n("0393"),N=n("132d"),H=n("8860"),R=n("da13"),V=n("0fd9"),S=n("8654"),O=n("a844"),j=n("3a2f"),M=Object(x["a"])(b,a,i,!1,null,"7f2d32b0",null);e["default"]=M.exports;_()(M,{VBadge:D["a"],VBtn:I["a"],VCarouselTransition:y["a"],VCol:C["a"],VDivider:E["a"],VExpansionPanel:$["a"],VExpansionPanelContent:L["a"],VExpansionPanelHeader:T["a"],VExpansionPanels:A["a"],VIcon:N["a"],VList:H["a"],VListItem:R["a"],VRow:V["a"],VTextField:S["a"],VTextarea:O["a"],VTooltip:j["a"]})},d171:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"text-h5"},[t._t("default")],2),n("v-divider",{staticClass:"mb-1"})],1)},i=[],r={name:"SettingTitle"},l=r,s=n("2877"),o=n("6544"),d=n.n(o),c=n("ce7e"),u=Object(s["a"])(l,a,i,!1,null,"3a9c3a33",null);e["default"]=u.exports;d()(u,{VDivider:c["a"]})}}]);
//# sourceMappingURL=chunk-0251a1ba.3e109107.js.map