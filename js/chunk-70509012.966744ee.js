(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70509012"],{"0dd7":function(e,t,r){},"7a2d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",{staticClass:"d-flex",attrs:{md:"4",cols:"12"}},[r("Groups",{attrs:{user:e.user,"server-bundles":e.serverBundles}})],1),r("v-col",{staticClass:"d-flex",attrs:{md:"3",cols:"12"}},[r("Packets",{attrs:{user:e.user}})],1),r("v-col",{staticClass:"d-flex"},[r("LinkedAccounts",{attrs:{user:e.user}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"4"}},[r("ProfilePicture",{attrs:{user:e.user}})],1)],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"flex-grow-1"},[r("dialog-form",{ref:"addMembershipDialog",attrs:{"form-schema":e.userMembershipAddForm},on:{submit:e.addUserMembership}}),r("v-card-title",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-group")]),e._v(" "+e._s(e.$t("groups"))+" "),r("v-spacer"),r("v-btn",{attrs:{color:"success",outlined:""},on:{click:function(t){return e.$refs.addMembershipDialog.show()}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),r("span",[e._v(e._s(e.$t("add")))])],1)],1),e.dataFetched>=2?r("v-card-text",[r("v-row",{staticClass:"mb-1 mt-1"},[r("v-col",[r("v-simple-table",[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v(" "+e._s(e.$t("serverbundle"))+" ")]),r("th",{staticClass:"text-left"},[e._v(" "+e._s(e.$t("groups"))+" ")])])]),r("tbody",e._l(e.serverBundles,(function(t){return r("tr",{key:t.id},[r("td",[e._v(" "+e._s(t.name)+" ")]),r("td",e._l(e.getUserActiveGroupsByBundle(t.id),(function(t){return r("v-chip",{key:t.id,staticClass:"ml-1 mb-1 a",class:e.checkGroups(t),attrs:{color:t.color?t.color:"#000000","text-color":e.$vuetify.theme.dark?"white":"black",outlined:""},on:{mouseover:function(r){return e.setActiveProps(t)},mouseleave:e.resetActives}},[e._v(e._s(t.name)+" ")])})),1)])})),0)])],1)],1),r("v-divider"),r("v-row",[r("v-col",[r("v-expansion-panels",{attrs:{flat:"",accordion:""}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(" "+e._s(e.$t("_dashboard.labels.groupMemberships"))+" ")]),r("v-expansion-panel-content",[r("v-data-table",{attrs:{headers:e.groupTableHeaders,items:e.getMembershipTable,"items-per-page":5,dense:"","hide-default-footer":!0}})],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v(" "+e._s(e.$t("_dashboard.labels.activeProperties"))+" ")]),r("v-expansion-panel-content",e._l(e.getProps,(function(t){return r("span",{key:t.id},[r("v-chip",{staticClass:"ml-1 mb-1 a success",class:e.checkProps(t),attrs:{small:""},on:{mouseover:function(r){return e.setActiveGroups(t)},mouseleave:e.resetActives}},[e._v(e._s(t.name)+" ")])],1)})),0)],1)],1)],1)],1)],1):e._e()],1)},i=[],o=r("1da1"),u=(r("159b"),r("07ac"),r("b0c0"),r("caad"),r("2532"),r("a15b"),r("4de4"),r("7db0"),r("96cf"),r("861b")),c=r("8826"),l=r("fe0b"),d=c["a"].apiURL,v={type:"object",required:["serverbundle","group","begin"],properties:{begin:{type:"string",title:l["a"].t("begin"),format:"date-time",default:new Date},end:{type:"string",title:l["a"].t("end"),format:"date-time",description:l["a"].t("_dashboard.membershipEndDescription")},serverbundle:c["a"].serverbundleSelectField},dependencies:{serverbundle:{properties:{group:{type:"object",title:l["a"].t("group"),"x-fromUrl":"".concat(d,"/group/?serverbundle_id={serverbundle.id}"),"x-itemKey":"id","x-itemTitle":"name"}}}}},p=r("cc3b"),f=r("7430"),h={name:"Groups",components:{DialogForm:u["a"]},data:function(){return{dataFetched:0,activeProps:[],activeGroups:[],userActiveGroups:[],groups:[],memberships:[],bundleGroups:[],groupTableHeaders:[{text:this.$t("groupname"),align:"start",value:"name"},{text:this.$t("serverbundle"),value:"bundle"},{text:this.$t("startdate"),value:"startDate"},{text:this.$t("enddate"),value:"endDate"}],userMembershipAddForm:v}},watch:{$route:function(){this.queryData()}},props:["serverBundles","user"],beforeMount:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.queryData();case 1:case"end":return t.stop()}}),t)})))()},methods:{resetActives:function(){this.activeProps=[],this.activeGroups=[]},setActiveProps:function(e){var t=this;Object.values(e.properties).forEach((function(e){return t.activeProps.push(e.name)})),this.activeGroups.push(e.id)},setActiveGroups:function(e){this.activeGroups.push(e.group_id),this.activeProps.push(e.name)},checkGroups:function(e){var t=[];return this.activeGroups.includes(e.id)&&(t.push("font-weight-bold"),t.push("text-decoration-underline")),t.join(" ")},checkProps:function(e){var t=[];return this.activeProps.includes(e.name)&&t.push("darken-3"),e.granted||t.push("error"),t.join(" ")},getGroupsByBundle:function(e){return this.groups.filter((function(t){return t.serverbundle_id===e}))},getUserActiveGroupsByBundle:function(e){return this.userActiveGroups.filter((function(t){return t.serverbundle_id===e}))},getPropsByBundle:function(e){if(!this.dataFetched)return[];var t=[];return this.getGroupsByBundle(e).forEach((function(e){Object.values(e.properties).forEach((function(e){return t.push(e)}))})),t},getGroupById:function(e){return this.groups.find((function(t){return t.id===e}))},getBundleById:function(e){return this.serverBundles.find((function(t){return t.id===e}))},queryData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"];case 2:return t.sent.user_getMemberships(e.user.id).then((function(t){e.memberships=t.data,e.dataFetched+=1})),t.next=5,f["a"];case 5:return t.sent.group_getGroups().then((function(t){e.groups=t.data,e.dataFetched+=1})),t.next=8,p["a"];case 8:t.sent.user_getActiveGroups(e.user.id).then((function(t){e.userActiveGroups=t.data,e.dataFetched+=1}));case 9:case"end":return t.stop()}}),t)})))()},addUserMembership:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$refs.addMembershipDialog.getData(),r.group_id=r.group.id,a=e.$route.params.id,new Date(r.begin)>new Date(r.end)&&e.$refs.addMembershipDialog.setErrorMessage("Begin date after end date"),t.next=6,p["a"];case 6:t.sent.user_addMembership(a,r).then((function(){e.queryData(),e.$refs.addMembershipDialog.closeAndReset()})).catch((function(t){e.$refs.addMembershipDialog.setErrorMessage(t.response.data.detail)}));case 7:case"end":return t.stop()}}),t)})))()}},computed:{getProps:function(){var e=[];return this.userActiveGroups.forEach((function(t){Object.values(t.properties).forEach((function(t){return e.push(t)}))})),e},getMembershipTable:function(){var e=this,t=[];return this.memberships.forEach((function(r){var a={};a.name=e.getGroupById(r.group_id).name,a.bundle=e.getBundleById(e.getGroupById(r.group_id).serverbundle_id).name,a.startDate=null!=r.begin?e.$d(new Date(r.begin),"short",e.$i18n.locale):"-∞",a.endDate=null!=r.end?e.$d(new Date(r.end),"short",e.$i18n.locale):"∞",t.push(a)})),t}}},m=h,b=(r("fc21"),r("2877")),g=r("6544"),_=r.n(g),x=r("8336"),y=r("b0af"),$=r("99d9"),k=r("cc20"),A=r("62ad"),D=r("8fea"),V=r("ce7e"),w=r("cd55"),C=r("49e2"),M=r("c865"),B=r("0393"),P=r("132d"),E=r("0fd9"),G=r("1f4f"),j=r("2fa4"),T=Object(b["a"])(m,s,i,!1,null,"16473cac",null),O=T.exports;_()(T,{VBtn:x["a"],VCard:y["a"],VCardText:$["c"],VCardTitle:$["d"],VChip:k["a"],VCol:A["a"],VDataTable:D["a"],VDivider:V["a"],VExpansionPanel:w["a"],VExpansionPanelContent:C["a"],VExpansionPanelHeader:M["a"],VExpansionPanels:B["a"],VIcon:P["a"],VRow:E["a"],VSimpleTable:G["a"],VSpacer:j["a"]});var F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"flex-grow-1"},[r("v-card-title",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-link")]),e._v(" "+e._s(e.$t("_dashboard.labels.linkedAccounts"))+" "),r("v-spacer"),r("v-btn",{attrs:{color:"success",outlined:""},on:{click:function(t){return e.$refs.linkAccountDialog.show()}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-account-plus")]),r("span",[e._v(e._s(e.$t("_dashboard.labels.linkNewAccount")))])],1)],1),r("v-card-text",[r("v-data-iterator",{attrs:{items:e.getAccountData,"item-key":"id","hide-default-footer":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.items;return[r("v-row",e._l(a,(function(t){return r("v-col",{key:t.id,attrs:{sm:"6"}},[r("v-card",{staticClass:"mt-3"},[r("v-card-title",[r("v-row",[r("v-col",[r("v-icon",{staticClass:"mr-2"},[e._v(" "+e._s(e.userTypeIcons[t.type])+" ")]),e._v(" "+e._s(t.type)+" ")],1),r("v-col",{attrs:{cols:"3"}},[r("v-avatar",{attrs:{size:"35"}},[r("img",{attrs:{src:t.avatar,size:"5",alt:"avatar"}})])],1)],1)],1),r("v-divider"),r("v-divider"),r("v-card-text",[r("v-row",[r("v-col",[r("v-list",{attrs:{dense:""}},[r("v-list-item",[r("v-list-item-content",[e._v(e._s(e.$t("id")))]),r("v-list-item-content",[e._v(e._s(t.identifier))])],1),r("v-list-item",[r("v-list-item-content",[e._v(e._s(e.$t("username")))]),r("v-list-item-content",[e._v(e._s(t.username))])],1),e._l(t.attributes,(function(t,a){return r("v-list-item",{key:a},[r("v-list-item-content",[e._v(e._s(e.$t(a)))]),r("v-list-item-content",[e._v(e._s(t))])],1)}))],2)],1)],1)],1)],1)],1)})),1)]}}])})],1),r("LinkAccountDialog",{ref:"linkAccountDialog"})],1)},S=[],I=r("de46"),L=r("e348"),R=r("9985"),U={name:"LinkedAccounts",components:{LinkAccountDialog:L["a"]},props:{user:Object},data:function(){return{userAccounts:{},attributeDefinitions:[],componentLoaded:!1,userTypeIcons:R["a"].userTypeIcons}},beforeMount:function(){this.queryData()},watch:{$route:function(){this.queryData()}},methods:{queryData:function(){var e=this;I["a"].user.getAttributeDefinitions().then((function(t){e.attributeDefinitions=t.data})),I["a"].user.getUser(this.user.id).then((function(t){e.userAccounts=t.data,e.componentLoaded=!0}))}},computed:{getAccounts:function(){var e=[],t={};return t.type=this.userAccounts.type,t.username=this.userAccounts.attributes.username,e.push(t),this.userAccounts.linked_users.forEach((function(t){var r={};r.type=t.type,r.username=t.attributes.username,e.push(r)})),e},getAccountData:function(){if(!this.componentLoaded)return[];var e=[];return e.push(this.userAccounts),this.userAccounts.linked_users.forEach((function(t){e.push(t)})),this.attributeDefinitions.forEach((function(t){!1===t.unspecific&&delete e.find((function(e){return e.type===t.user_type})).attributes[t.name]})),e}}},q=U,N=r("8212"),H=r("c377"),z=r("8860"),J=r("da13"),W=r("5d23"),K=Object(b["a"])(q,F,S,!1,null,"6215a654",null),Q=K.exports;_()(K,{VAvatar:N["a"],VBtn:x["a"],VCard:y["a"],VCardText:$["c"],VCardTitle:$["d"],VCol:A["a"],VDataIterator:H["a"],VDivider:V["a"],VIcon:P["a"],VList:z["a"],VListItem:J["a"],VListItemContent:W["a"],VRow:E["a"],VSpacer:j["a"]});var X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"flex-grow-1"},[r("v-card-title",[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-gift-open")]),e._v(" "+e._s(e.$t("packets"))+" "),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"success"},on:{click:function(t){return e.$router.push({name:"UserPurchases",params:{id:e.user.id}})}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-history")]),r("span",[e._v(e._s(e.$t("purchases")))])],1)],1),r("v-card-text",[r("v-list",{staticClass:"mt-3",attrs:{dense:""}},e._l(e.userPackets,(function(t){return r("v-list-item",{key:t.id},[e._v(" "+e._s(t.packet.title)+" ")])})),1)],1)],1)},Y=[],Z={name:"Packets.vue",data:function(){return{userPackets:[]}},props:{user:Object},beforeMount:function(){this.queryData()},methods:{queryData:function(){var e=this;I["a"].user.getPackets(this.user.id).then((function(t){e.userPackets=t.data})).catch((function(t){console.log(t),e.utils.notifyUnexpectedError(t.response.data)}))}},watch:{$route:function(){this.queryData()}}},ee=Z,te=Object(b["a"])(ee,X,Y,!1,null,"5354d408",null),re=te.exports;_()(te,{VBtn:x["a"],VCard:y["a"],VCardText:$["c"],VCardTitle:$["d"],VIcon:P["a"],VList:z["a"],VListItem:J["a"],VSpacer:j["a"]});var ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{ref:"Card",staticClass:"text-center d-flex align-center",attrs:{height:"200px",width:"200px"}},[r("v-row",{attrs:{justify:"center"}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.hover;return[r("v-fade-transition",{attrs:{mode:"out-in"}},[r("v-avatar",{key:e.avatarNum,attrs:{height:"150px",width:"150px"}},[r("v-img",{attrs:{src:e.getAvatars[e.avatarNum]}}),r("v-fade-transition",[a?r("v-overlay",{attrs:{absolute:""}},[r("p",[e._v(e._s(e.returnUserData.type)+" ")]),r("UserLink",{attrs:{outline:!1,user:e.returnUserData}})],1):e._e()],1)],1)],1)]}}])})],1)],1)},ne=[],se=r("ef7c"),ie={name:"ProfilePicture.vue",components:{UserLink:se["a"]},data:function(){return{avatarNum:0}},props:{user:Object},mounted:function(){this.cycleAvatar()},computed:{getAvatars:function(){if(this.user===[])return[];var e=[];return e.push(this.user.avatar),this.user.linked_users.forEach((function(t){e.push(t.avatar)})),e},returnUserData:function(){return this.user===[]?[]:0===this.avatarNum?this.user:this.user.linked_users[this.avatarNum-1]}},methods:{cycleAvatar:function(){var e=this;setTimeout((function(){e.avatarNum===e.getAvatars.length-1?e.avatarNum=0:e.avatarNum+=1,e.cycleAvatar()}),4e3)}}},oe=ie,ue=r("0789"),ce=r("ce87"),le=r("adda"),de=r("a797"),ve=Object(b["a"])(oe,ae,ne,!1,null,"3d65b132",null),pe=ve.exports;_()(ve,{VAvatar:N["a"],VCard:y["a"],VFadeTransition:ue["d"],VHover:ce["a"],VImg:le["a"],VOverlay:de["a"],VRow:E["a"]});var fe={name:"General.vue",components:{ProfilePicture:pe,Groups:O,LinkedAccounts:Q,Packets:re},props:{serverBundles:Array,user:Object}},he=fe,me=Object(b["a"])(he,a,n,!1,null,"249af3c0",null);t["default"]=me.exports;_()(me,{VCol:A["a"],VRow:E["a"]})},"861b":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Dialog",{ref:"dialog",attrs:{"max-width":e.maxWidth,title:e.title,icon:e.titleIcon},on:{cancel:e.cancelForm},scopedSlots:e._u([null!=e.submitText||null!=e.cancelText?{key:"actions",fn:function(){return[null!=e.submitText?r("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.submit}},[e.loading?r("v-progress-circular",{attrs:{indeterminate:"",size:"25",width:"2"}}):e._e(),e.loading?e._e():r("v-icon",{attrs:{left:""}},[e._v("mdi-check")]),e.loading?e._e():r("div",[e._v(" "+e._s(e.submitText)+" ")])],1):e._e(),null!=e.cancelText?r("v-btn",{attrs:{color:"lighten-5",text:""},on:{click:e.cancelForm}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v(" "+e._s(e.cancelText)+" ")],1):e._e()]},proxy:!0}:null],null,!0)},[e.formSchema?[r("GenForm",{ref:"form",attrs:{"form-schema":e.formSchema,"error-message":e.errorMessage,"hide-buttons":!0,"cancel-text":e.cancelText,"submit-text":e.submitText,"options-extra":e.optionsExtra},on:{submit:function(t){return e.$emit("submit",e.item)},cancel:function(t){e.$refs.dialog.open=!1},mounted:e.genFormMounted,updated:function(t){return e.$emit("updated")},notValid:function(t){e.loading=!1}},scopedSlots:e._u([e._l(e.$slots,(function(t,r){return{key:r,fn:function(){return[e._t(r)]},proxy:!0}}))],null,!0)})]:e._e()],2)},n=[],s=(r("a9e3"),r("9e77")),i=r("3f7a"),o={name:"DialogForm",components:{Dialog:i["a"],GenForm:s["a"]},props:{title:String,titleIcon:String,formSchema:Object,errorMessage:String,maxWidth:{type:Number,default:500},submitText:{type:String,default:"submit"},cancelText:{type:String,default:"cancel"},slots:Array},data:function(){return{dataBeforeMount:null,item:null,loading:!1,optionsExtra:{editMode:"inline"}}},methods:{show:function(e){this.$refs.dialog.show(),this.item=e},closeAndReset:function(){return this.loading=!1,this.$refs.dialog.close(),this.$refs.form.cancelForm()},getData:function(){return this.$refs.form?this.$refs.form.getData():Object},setData:function(e){void 0===this.$refs.form?this.dataBeforeMount=e:this.$refs.form.setData(e)},validateAndRun:function(){return this.$refs.form.validateAndRun()},cancelForm:function(){return this.loading=!1,this.$refs.form.cancelForm()},setErrorMessage:function(e){return this.loading=!1,this.$refs.form.setErrorMessage(e)},genFormMounted:function(){this.$refs.form.setData(this.dataBeforeMount)},submit:function(){this.loading||(this.loading=!0,this.$refs.form.validateAndRun())}},computed:{open:function(){return this.$refs.dialog.open}}},u=o,c=r("2877"),l=r("6544"),d=r.n(l),v=r("8336"),p=r("132d"),f=r("490a"),h=Object(c["a"])(u,a,n,!1,null,"b925c67c",null);t["a"]=h.exports;d()(h,{VBtn:v["a"],VIcon:p["a"],VProgressCircular:f["a"]})},ce87:function(e,t,r){"use strict";var a=r("16b7"),n=r("f2e7"),s=r("58df"),i=r("d9bd");t["a"]=Object(s["a"])(a["a"],n["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(e=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(this.disabled||(e.data=e.data||{},this._g(e.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),e):(Object(i["c"])("v-hover should only contain a single element",this),e)):(Object(i["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var e}})},ef7c:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-chip",{attrs:{outlined:e.outline,color:"primary"},on:{click:function(t){return e.$router.push({name:"UserDashboard",params:{id:e.user.id}})}}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-account")]),e._v(" "+e._s(e.user.username)+" ")],1)},n=[],s={name:"UserLink",props:{user:Object,outline:{type:Boolean,default:!0}}},i=s,o=r("2877"),u=r("6544"),c=r.n(u),l=r("cc20"),d=r("132d"),v=Object(o["a"])(i,a,n,!1,null,"1eec7410",null);t["a"]=v.exports;c()(v,{VChip:l["a"],VIcon:d["a"]})},fc21:function(e,t,r){"use strict";r("0dd7")}}]);
//# sourceMappingURL=chunk-70509012.966744ee.js.map