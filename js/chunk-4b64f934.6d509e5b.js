(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b64f934"],{"1f09":function(e,t,a){},"1f4f":function(e,t,a){"use strict";var s=a("5530"),n=(a("a9e3"),a("8b37"),a("80d2")),i=a("7560"),r=a("58df");t["a"]=Object(r["a"])(i["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(s["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(n["g"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(e){return e("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},3129:function(e,t,a){"use strict";var s=a("3835"),n=a("5530"),i=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),r=a("24b2"),o=a("7560"),l=a("58df"),c=a("80d2");t["a"]=Object(l["a"])(i["a"],r["a"],o["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(n["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(n["a"])(Object(n["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(n["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(e,t){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(e," v-skeleton-loader__bone")},t)},genBones:function(e){var t=this,a=e.split("@"),n=Object(s["a"])(a,2),i=n[0],r=n[1],o=function(){return t.genStructure(i)};return Array.from({length:r}).map(o)},genStructure:function(e){var t=[];e=e||this.type||"";var a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton:function(){var e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(c["r"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones:function(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave:function(e){e.style.setProperty("display","none","important")},resetStyles:function(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render:function(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"8b37":function(e,t,a){},bb51:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("dialog-form",{ref:"messageAddDialog",attrs:{"form-schema":e.messageAddSchema,title:e.$t("home.addNews"),"max-width":1e3},on:{submit:e.addMessage}},[a("template",{slot:"type-after"},[a("vue-editor",{model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],2),a("dialog-form",{ref:"messageEditDialog",attrs:{"form-schema":e.messageAddSchema,title:e.$t("home.editNews"),"max-width":1e3},on:{submit:e.editMessage}},[a("template",{slot:"type-after"},[a("vue-editor",{model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],2),a("delete-confirmation-dialog",{ref:"deleteMessageDialog",on:{submit:e.deleteMessage}}),a("v-row",[a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-row",[0!==e.getNewsOfTheDay.length?a("v-col",{staticClass:"d-flex",attrs:{cols:"8"}},[a("v-card",{staticClass:"d-flex",attrs:{flat:""}},[a("v-card-title",{staticClass:"align-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[e._v("mdi-newspaper")]),a("v-sheet",{attrs:{vertical:"",color:"primary",width:"2",height:"25"}}),a("h2",{staticClass:"text-h4 ml-2"},[e._v(e._s(e.$t("home.newsOfTheDay")))])],1)],1)],1):e._e(),e.$checkProp("news_edit")?a("v-col",{staticClass:"d-flex"},[e.$vuetify.breakpoint.smAndUp?a("v-spacer"):e._e(),a("v-card",{staticClass:"d-flex align-center pr-2 pl-2",attrs:{flat:"","min-height":"50px",height:"70%"}},[a("v-btn",{attrs:{outlined:"",color:"success",height:"80%"},on:{click:e.showAddMessageDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),a("span",[e._v(e._s(e.$t("home.addNews")))])],1)],1)],1):e._e()],1),a("transition-group",{attrs:{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},e._l(e.getNewsOfTheDay,(function(t){return a("v-card",{key:t.id,staticClass:"ma-10"},[a("v-card-title",{class:{"grey-title":!e.$vuetify.theme.dark}},[a("v-row",[a("v-col",[e._v(" "+e._s(t.subject)+" ")]),e.$checkProp("news_edit")?a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"primary",small:""},on:{click:function(a){return e.openEditMessageDialog(t)}}},[a("v-icon",[e._v(" mdi-pencil ")])],1),a("v-btn",{attrs:{outlined:"",color:"error",small:""},on:{click:function(a){return e.openDeleteMessageDialog(t)}}},[a("v-icon",[e._v(" mdi-delete ")])],1)],1):e._e()],1)],1),a("v-card-text",{staticClass:"mt-3 ql-editor",domProps:{innerHTML:e._s(t.content)}}),a("v-card-actions",{staticClass:"text--disabled pt-0"},[a("span",{staticClass:"mr-3"},[e._v(e._s(e.$d(new Date(t.created),"long")))]),t.creator?a("user-link",{attrs:{user:t.creator}}):e._e()],1)],1)})),1),0!==e.getNews.length?a("v-row",[a("v-col",{staticClass:"d-flex"},[a("v-card",{staticClass:"d-flex",attrs:{flat:""}},[a("v-card-title",{staticClass:"align-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[e._v("mdi-newspaper-variant-multiple")]),a("v-sheet",{attrs:{vertical:"",color:"primary",width:"2",height:"25"}}),a("h2",{staticClass:"text-h4 ml-2"},[e._v(e._s(e.$t("home.news")))])],1)],1)],1)],1):e._e(),a("v-divider"),a("transition-group",{attrs:{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},e._l(e.getNews,(function(t){return a("v-card",{key:t.id,staticClass:"mt-3",attrs:{flat:"",outlined:""}},[a("v-card-title",{class:{"grey-title":!e.$vuetify.theme.dark}},[a("v-row",[a("v-col",[e._v(" "+e._s(t.subject)+" ")]),e.$checkProp("news_edit")?a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"primary",small:""},on:{click:function(a){return e.openEditMessageDialog(t)}}},[a("v-icon",[e._v(" mdi-pencil ")])],1),a("v-btn",{attrs:{outlined:"",color:"error",small:""},on:{click:function(a){return e.openDeleteMessageDialog(t)}}},[a("v-icon",[e._v(" mdi-delete ")])],1)],1):e._e()],1)],1),a("v-card-text",{staticClass:"mt-3 ql-editor",domProps:{innerHTML:e._s(t.content)}}),a("v-card-actions",{staticClass:"text--disabled pt-0"},[a("span",{staticClass:"mr-3"},[e._v(e._s(e.$d(new Date(t.created),"long")))]),t.creator?a("user-link",{attrs:{user:t.creator}}):e._e()],1)],1)})),1),!e.exhausted&&e.fetching?a("div",{staticClass:"animate__animated animate__fade mt-3"},[e.fetching?a("v-skeleton-loader",{attrs:{type:"article"}}):e._e()],1):e._e(),e.exhausted?a("v-card",{staticClass:"mt-3",attrs:{flat:""}},[a("v-card-text",{staticClass:"text-center animate__animated animate__fadeIn"},[e._v(" "+e._s(e.$t("home.newsExhausted"))+" ")])],1):e._e()],1),a("v-col",{ref:"StatusCol"},[a("ServerStatus",{style:{position:"fixed",width:e.statusColumnWidth+"px"}})],1)],1)],1)},n=[],i=a("1da1"),r=(a("96cf"),a("159b"),a("c740"),a("a434"),a("4de4"),a("cc3b")),o=a("ef7c"),l=a("fe0b"),c={type:"object",required:["subject","type"],properties:{subject:{type:"string",title:l["a"].t("home.messageSubject")},type:{type:"string",title:l["a"].t("home.messageType"),default:"DEFAULT",oneOf:[{const:"DEFAULT",title:l["a"].t("home.messageTypeNews")},{const:"PINNED",title:l["a"].t("home.messageTypePinned")}]}}},d=a("5873"),u=a("861b"),h=a("3000"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"pb-0"},[a("v-row",[a("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},[a("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[e._v("mdi-server")]),a("v-sheet",{staticClass:"mt-1",attrs:{vertical:"",color:"primary",width:"2",height:"25"}}),a("span",{staticClass:"ml-2 mr-1"},[e._v(" "+e._s(e.$t("server"))+" ")])],1)],1)],1),a("v-card-text",e._l(e.bundles,(function(t){return a("div",{key:t.id,staticClass:"mt-3"},[t.icon?a("v-icon",{attrs:{left:"",small:"",color:t.color}},[e._v(e._s(t.icon))]):e._e(),a("span",{style:"color:"+t.color},[e._v(e._s(t.name))]),a("v-divider",{staticClass:"mb-2"}),a("v-simple-table",{attrs:{dense:""}},[a("tbody",e._l(e.getServer(t.id),(function(t){return a("tr",{key:t.id},[a("td",[a("v-icon",{attrs:{color:"green",left:""}},[e._v(" mdi-flash ")]),a("span",[a("a",[e._v("42 / 69")])])],1),a("td",[e._v(e._s(t.name))])])})),0)])],1)})),0)],1)},f=[],g=a("7430"),v={name:"ServerStatus",components:{},data:function(){return{servers:[],bundles:[]}},beforeMount:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"];case 2:return t.sent.server_getServers().then((function(t){e.servers=t.data})),t.next=5,g["a"];case 5:t.sent.server_getBundles().then((function(t){e.bundles=t.data}));case 6:case"end":return t.stop()}}),t)})))()},getServer:function(e){return this.servers.filter((function(t){return t.serverbundle_id===e}))}}},p=v,_=a("2877"),b=a("6544"),w=a.n(b),y=a("b0af"),x=a("99d9"),C=a("62ad"),D=a("ce7e"),k=a("132d"),$=a("0fd9"),S=a("8dd9"),E=a("1f4f"),O=Object(_["a"])(p,m,f,!1,null,"ede953ae",null),M=O.exports;w()(O,{VCard:y["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:C["a"],VDivider:D["a"],VIcon:k["a"],VRow:$["a"],VSheet:S["a"],VSimpleTable:E["a"]});var j={components:{ServerStatus:M,DeleteConfirmationDialog:h["a"],UserLink:o["a"],VueEditor:d["a"],DialogForm:u["a"]},data:function(){return{news:[],page:0,exhausted:!1,fetching:!1,messageAddSchema:c,message:null,statusColumnWidth:250}},mounted:function(){this.fetchNews(),this.scroll(),this.setWidth()},methods:{fetchNews:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.fetching=!0,a.next=3,r["a"];case 3:a.sent.news_getMessages({page:e,size:15}).then((function(e){e.data.items.forEach((function(e){return t.news.push(e)})),0===e.data.items.length&&(t.exhausted=!0),t.fetching=!1}));case 4:case"end":return a.stop()}}),a)})))()},scroll:function(){var e=this;window.onscroll=function(){var t=document.documentElement.scrollTop+window.innerHeight+10>=document.documentElement.offsetHeight;!t||e.fetching||e.exhausted||(e.page+=1,e.fetchNews(e.page))}},showAddMessageDialog:function(){this.message=null,this.$refs.messageAddDialog.show()},addMessage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$refs.messageAddDialog.getData(),a.content=e.message,t.next=4,r["a"];case 4:t.sent.news_addMessage({},a).then((function(t){e.$refs.messageAddDialog.closeAndReset(),e.message=null,e.news.unshift(t.data)})).catch((function(t){return e.$refs.messageAddDialog.setErrorMessage(t.response.data.detail)}));case 5:case"end":return t.stop()}}),t)})))()},openDeleteMessageDialog:function(e){this.$refs.deleteMessageDialog.show(e)},deleteMessage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r["a"];case 2:a.sent.news_deleteMessage(e.id).then(t.$refs.deleteMessageDialog.closeAndReset).catch((function(e){return t.$refs.deleteMessageDialog.setErrorMessage(e.response.data.detail)})),s=t.news.findIndex((function(t){return t.id===e.id})),s>-1&&t.news.splice(s,1);case 5:case"end":return a.stop()}}),a)})))()},openEditMessageDialog:function(e){this.$refs.messageEditDialog.show(e),this.message=e.content,this.$refs.messageEditDialog.setData(e)},editMessage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.$refs.messageEditDialog.getData(),s.content=t.message,a.next=4,r["a"];case 4:a.sent.news_editMessage(e.id,s).then((function(e){var a=t.news.findIndex((function(t){return t.id===e.data.id}));a>-1&&t.news.splice(a,1,e.data),t.$refs.messageEditDialog.closeAndReset()})).catch((function(e){return t.$refs.messageEditDialog.setErrorMessage(e.response.data.detail)}));case 5:case"end":return a.stop()}}),a)})))()},setWidth:function(){this.statusColumnWidth=this.$refs.StatusCol.clientWidth}},computed:{getNews:function(){return this.news.filter((function(e){return"DEFAULT"===e.type}))},getNewsOfTheDay:function(){return this.news.filter((function(e){return"PINNED"===e.type}))}},created:function(){window.addEventListener("resize",this.setWidth)},destroyed:function(){window.removeEventListener("resize",this.setWidth)}},V=j,B=a("8336"),L=a("3129"),T=a("2fa4"),A=Object(_["a"])(V,s,n,!1,null,null,null);t["default"]=A.exports;w()(A,{VBtn:B["a"],VCard:y["a"],VCardActions:x["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:C["a"],VDivider:D["a"],VIcon:k["a"],VRow:$["a"],VSheet:S["a"],VSkeletonLoader:L["a"],VSpacer:T["a"]})},ef7c:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-chip",{attrs:{outlined:e.outline,color:"primary"},on:{click:function(t){return e.$router.push({name:"UserDashboard",params:{id:e.user.id}})}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-account")]),e._v(" "+e._s(e.user.username)+" ")],1)},n=[],i={name:"UserLink",props:{user:Object,outline:{type:Boolean,default:!0}}},r=i,o=a("2877"),l=a("6544"),c=a.n(l),d=a("cc20"),u=a("132d"),h=Object(o["a"])(r,s,n,!1,null,"1eec7410",null);t["a"]=h.exports;c()(h,{VChip:d["a"],VIcon:u["a"]})}}]);
//# sourceMappingURL=chunk-4b64f934.6d509e5b.js.map