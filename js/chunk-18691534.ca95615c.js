(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18691534"],{"0798":function(t,e,n){"use strict";var i=n("5530"),a=n("ade3"),s=(n("caad"),n("0c18"),n("10d2")),o=n("afdd"),r=n("9d26"),c=n("f2e7"),l=n("7560"),u=n("f40d"),d=n("58df"),f=n("d9bd");e["a"]=Object(d["a"])(s["a"],c["a"],u["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(a["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(o["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(r["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(r["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=Object(i["a"])(Object(i["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||l["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(f["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},"0c18":function(t,e,n){},"109a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ConfirmationDialog",{ref:"markAsReadDialog",attrs:{"btn-text":t.$t("notification.markAllAsRead")},on:{submit:t.markAllAsRead}}),n("PageTitle",{attrs:{icon:"mdi-bell-outline"}},[t._v(t._s(t.$t("notification.notifications")))]),n("v-card",[n("v-card-text",{staticClass:"mt-0 pt-0"},[n("v-fade-transition",[t.newMessages?n("v-btn",{staticClass:"mt-3",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.fetchData(1)}}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-sync ")]),t._v(" "+t._s(t.$t("notification.newNotifications"))+" ")],1):t._e()],1),n("DataTable",{staticClass:"mt-4",attrs:{headers:t.headers,items:t.notifications,"server-items-length":t.totalItems,"items-per-page":t.itemsPerPage,"footer-props":{"disable-items-per-page":!0}},on:{"update:serverItemsLength":function(e){t.totalItems=e},"update:server-items-length":function(e){t.totalItems=e},"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e},"update:page":t.newPage,"update:sort-desc":t.newDesc,"click:row":t.rowClick},scopedSlots:t._u([{key:"header",fn:function(){return[n("v-row",[n("v-col",{staticClass:"d-flex align-center"},[t.$vuetify.breakpoint.xsOnly?n("v-spacer"):t._e(),n("v-btn",{attrs:{outlined:"",color:"primary",dark:""},on:{click:t.$refs.markAsReadDialog.show}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-playlist-check ")]),t._v(" "+t._s(t.$t("notification.markAllAsRead"))+" ")],1)],1),n("v-col",{staticClass:"d-flex align-center"},[n("v-spacer"),n("v-checkbox",{staticClass:"mr-3",attrs:{"align-center":"",dense:"",label:t.$t("notification.hideReadNotifications")},on:{change:t.showReadNotifications}}),n("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{outlined:"",color:"primary",dark:""}},"v-btn",a,!1),i),[n("v-icon",{attrs:{left:""}},[t._v(" mdi-filter ")]),t._v(" "+t._s(t.$t("type"))+" ")],1)]}}])},[t._l(t.categories,(function(e,i){return n("v-checkbox",{key:i,staticClass:"ml-2, mr-2",attrs:{dense:"",label:t.$t("notification.type."+e.toLowerCase()),value:e},on:{change:t.newCat},model:{value:t.selectedCat,callback:function(e){t.selectedCat=e},expression:"selectedCat"}})})),n("a",{staticClass:"ma-1",on:{click:function(e){t.selectedCat=[]}}},[t._v(t._s(t.$t("reset")))])],2)],1)],1)]},proxy:!0},{key:"item.icon",fn:function(e){var i=e.item;return[n("v-icon",[t._v(" "+t._s(i.message.kwargs.icon)+" ")])]}},{key:"item.message",fn:function(e){var i=e.item;return[n("span",{class:{"font-weight-medium":!i.read}},[t._v(" "+t._s(t.$t("notification."+i.message.name,Object.assign({},i.message.kwargs)))+" ")])]}},{key:"item.category",fn:function(e){var i=e.item;return[n("span",{class:{"font-weight-medium":!i.read}},[t._v(" "+t._s(t.$t("notification.type."+i.category.toLowerCase()))+" ")])]}},{key:"item.time",fn:function(e){var i=e.item;return[n("span",{class:{"font-weight-medium":!i.read}},[t._v(" "+t._s(t.$t("notification.timeAgo",{time:t.utils.formatLength((new Date-new Date(i.created_on))/1e3)}))+" ")])]}},{key:"item.action",fn:function(e){var i=e.item;return[n("div",{staticClass:"text-right"},[i.link?n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[n("v-icon",t._g(t._b({staticClass:"mr-1"},"v-icon",a,!1),i),[t._v(" mdi-open-in-new ")])]}}],null,!0)},[n("span",[t._v(t._s(t.$t("notification.isLink")))])]):t._e(),n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[n("v-btn",t._g(t._b({attrs:{text:""},on:{click:function(e){return e.stopPropagation(),t.toggleReadStatus(i)}}},"v-btn",s,!1),a),[i.read?n("v-icon",[t._v(" mdi-email-outline ")]):n("v-icon",[t._v(" mdi-email-open-outline ")])],1)]}}],null,!0)},[i.read?n("span",[t._v(t._s(t.$t("notification.markUnRead")))]):n("span",[t._v(t._s(t.$t("notification.markRead")))])])],1)]}}])})],1)],1)],1)},a=[],s=n("5530"),o=n("1da1"),r=(n("99af"),n("9911"),n("b0c0"),n("96cf"),n("89dd")),c=n("ccbf"),l=n("c94e"),u=n("1fdb"),d=n("cc3b"),f={name:"Notification.vue",components:{PageTitle:r["a"],DataTable:u["a"],ConfirmationDialog:c["a"]},data:function(){return{selectedCat:[],itemsPerPage:7,newMessages:null,notifications:[],totalItems:null,categories:[],headers:[{text:this.$t("icon"),value:"icon",sortable:!1,focus:!0},{text:this.$t("message"),value:"message",sortable:!1},{text:this.$t("type"),value:"category",sortable:!1},{text:this.$t("createdOn"),value:"time"},{value:"action",sortable:!1,align:"right"}],state:{page:1,sortByCat:null,desc:!1,read:!1}}},mounted:function(){l["a"].on("notification",this.newNotification),this.fetchData(),this.fetchCategories()},methods:{fetchCategories:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"];case 2:e.sent.notification_getCategories().then((function(e){t.categories=e.data}));case 3:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:null,a=t.length>1&&void 0!==t[1]?t[1]:null,e.newMessages=!1,e.notifications=null,i&&(e.state.page=i),a&&(e.state.sortByCat=a),n.next=8,d["a"];case 8:n.sent.notification_getNotifications({size:e.itemsPerPage,page:e.state.page-1,descending:e.state.desc,categories:e.state.sortByCat,hide_read:e.state.read}).then((function(t){e.notifications=t.data.items,e.totalItems=t.data.total}));case 9:case"end":return n.stop()}}),n)})))()},newNotification:function(){this.newMessages=!0},getTime:function(t){var e=new Date(t);return"".concat(e.getHours(),":").concat(e.getMinutes())},newPage:function(t){this.fetchData(t)},newDesc:function(t){void 0===t[0]||!1===t[0]?this.state.desc=!1:this.state.desc=!0,!1!==t[0]&&this.fetchData(1)},newCat:function(t){this.fetchData(1,t)},resetCatFilter:function(){this.selectedCat=[],this.fetchData(1)},showReadNotifications:function(t){this.state.read=t,this.fetchData(1)},markAllAsRead:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"];case 2:e.sent.notification_markAsRead(null,{all:!0}).then((function(){t.$refs.markAsReadDialog.closeAndReset(),t.fetchData()}));case 3:case"end":return e.stop()}}),e)})))()},rowClick:function(t){t.link&&this.$router.push({name:t.link.name,params:Object(s["a"])({},t.link.kwargs)})},toggleReadStatus:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"];case 2:e.sent.notification_markAsRead(null,{id:[t.id]}),t.read=!t.read;case 4:case"end":return e.stop()}}),e)})))()}}},h=f,m=n("2877"),p=n("6544"),v=n.n(p),g=n("8336"),b=n("b0af"),_=n("99d9"),k=n("ac7c"),y=n("62ad"),C=n("0789"),w=n("132d"),x=n("e449"),$=n("0fd9"),S=n("2fa4"),B=n("3a2f"),D=Object(m["a"])(h,i,a,!1,null,"6f4950b4",null);e["default"]=D.exports;v()(D,{VBtn:g["a"],VCard:b["a"],VCardText:_["c"],VCheckbox:k["a"],VCol:y["a"],VFadeTransition:C["d"],VIcon:w["a"],VMenu:x["a"],VRow:$["a"],VSpacer:S["a"],VTooltip:B["a"]})},"1fdb":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",t._g(t._b({attrs:{items:t.realItems,search:t.searchModel,loading:t.loading,"item-key":t.itemKey},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-row",[n("v-col",{attrs:{"align-self":"center"}},[t._t("header")],2),t.$slots.header?t._e():n("v-spacer"),t.search?n("v-col",{attrs:{lg:"3",md:"6",sm:"12","align-self":"center"}},[n("v-text-field",{attrs:{label:t.$t("search"),"hide-details":"",outlined:"",dense:""},on:{input:function(e){return t.$emit("search",t.searchModel)}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[n("v-icon",[t._v(" mdi-magnify ")])]},proxy:!0}],null,!1,2092382991),model:{value:t.searchModel,callback:function(e){t.searchModel=e},expression:"searchModel"}})],1):t._e()],1)]},proxy:!0},{key:"footer.page-text",fn:function(){return[n("v-row",[n("v-col",{attrs:{"align-self":"center"}},[t._t("footer-right")],2)],1)]},proxy:!0},t._l(t.inheritSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"v-data-table",t.$attrs,!1),t.$listeners))},a=[],s={name:"DataTable",data:function(){return{searchModel:null}},props:{items:Array,search:{type:Boolean,default:!1},itemKey:{type:String,default:"id"}},computed:{loading:function(){return null==this.items},inheritSlots:function(){var t=this.$scopedSlots;return"header"in t&&delete t.header,t},realItems:function(){return this.items?this.items:[]}}},o=s,r=n("2877"),c=n("6544"),l=n.n(c),u=n("62ad"),d=n("8fea"),f=n("132d"),h=n("0fd9"),m=n("2fa4"),p=n("8654"),v=Object(r["a"])(o,i,a,!1,null,"21db08fe",null);e["a"]=v.exports;l()(v,{VCol:u["a"],VDataTable:d["a"],VIcon:f["a"],VRow:h["a"],VSpacer:m["a"],VTextField:p["a"]})},"89dd":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-3"},[n("v-row",[n("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},[n("v-card",{},[n("v-card-text",{staticClass:"text-left text-h4 d-flex align-center pa-3"},[null!=t.icon?n("v-icon",{staticClass:"mr-1",attrs:{color:"primary","x-large":""}},[t._v(t._s(t.icon))]):t._e(),n("v-sheet",{attrs:{vertical:"",color:"primary",width:"5",height:t.dividerHeight}}),n("span",{staticClass:"ml-4 mr-1"},[t._v(" "+t._s(t.title)+" "),t._t("default"),null!=t.subtitle?n("div",{staticClass:"subtitle-1"},[t._v(t._s(t.subtitle))]):t._e()],2)],1)],1)],1)],1)],1)},a=[],s={name:"PageTitle",props:{title:String,icon:String,subtitle:String},computed:{dividerHeight:function(){return null==this.subtitle?45:58}}},o=s,r=n("2877"),c=n("6544"),l=n.n(c),u=n("b0af"),d=n("99d9"),f=n("62ad"),h=n("132d"),m=n("0fd9"),p=n("8dd9"),v=Object(r["a"])(o,i,a,!1,null,"66734f8c",null);e["a"]=v.exports;l()(v,{VCard:u["a"],VCardText:d["c"],VCol:f["a"],VIcon:h["a"],VRow:m["a"],VSheet:p["a"]})},afdd:function(t,e,n){"use strict";var i=n("8336");e["a"]=i["a"]},ccbf:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{"max-width":400,title:t.$t("areYouSure"),icon:"mdi-help-circle"},scopedSlots:t._u([{key:"actions",fn:function(){return[n("v-col",[n("v-btn",{attrs:{text:"",color:"error",type:"submit",loading:t.loading},on:{click:t.submit}},[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.btnIcon))]),t._v(" "+t._s(t.btnText)+" ")],1)],1),n("v-spacer"),n("v-col",[n("v-btn",{attrs:{text:""},on:{click:t.cancel}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v(" "+t._s(t.$t("cancel"))+" ")],1)],1)]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[null!=t.errorMessage||null!=t.text?[null!=t.errorMessage?n("v-alert",{staticClass:"mt-2",attrs:{type:"error"}},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),n("div",{staticClass:"body-1 mt-2 text-center"},[t._v(" "+t._s(t.text)+" ")])]:t._e()],2)},a=[],s=n("3f7a"),o={name:"ConfirmationDialog",components:{Dialog:s["a"]},data:function(){return{dialog:null,errorMessage:null,item:null,loading:!1}},props:{text:String,btnIcon:{type:String,default:"mdi-check"},btnText:String},methods:{cancel:function(){this.loading=!1,this.dialog=!1,this.errorMessage=null},closeAndReset:function(){this.loading=!1,this.dialog=!1,this.errorMessage=null},submit:function(){this.loading||(this.loading=!0,this.$emit("submit",this.item))},show:function(t){this.item=t,this.dialog=!0,this.loading=!1},setErrorMessage:function(t){this.errorMessage=t,this.loading=!1}}},r=o,c=n("2877"),l=n("6544"),u=n.n(l),d=n("0798"),f=n("8336"),h=n("62ad"),m=n("132d"),p=n("2fa4"),v=Object(c["a"])(r,i,a,!1,null,"0b9cd249",null);e["a"]=v.exports;u()(v,{VAlert:d["a"],VBtn:f["a"],VCol:h["a"],VIcon:m["a"],VSpacer:p["a"]})},e4cd:function(t,e,n){"use strict";n("a9e3"),n("caad"),n("b0c0");var i=n("d9bd"),a=n("2b0e");e["a"]=a["default"].extend({name:"mobile",props:{mobileBreakpoint:{type:[Number,String],default:function(){return this.$vuetify?this.$vuetify.breakpoint.mobileBreakpoint:void 0},validator:function(t){return!isNaN(Number(t))||["xs","sm","md","lg","xl"].includes(String(t))}}},computed:{isMobile:function(){var t=this.$vuetify.breakpoint,e=t.mobile,n=t.width,i=t.name,a=t.mobileBreakpoint;if(a===this.mobileBreakpoint)return e;var s=parseInt(this.mobileBreakpoint,10),o=!isNaN(s);return o?n<s:i===this.mobileBreakpoint}},created:function(){this.$attrs.hasOwnProperty("mobile-break-point")&&Object(i["d"])("mobile-break-point","mobile-breakpoint",this)}})}}]);
//# sourceMappingURL=chunk-18691534.ca95615c.js.map